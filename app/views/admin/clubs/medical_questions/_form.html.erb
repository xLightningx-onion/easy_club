<% frame_dom_id = local_assigns[:frame_id] || (medical_question.persisted? ? dom_id(medical_question) : dom_id(club, :new_medical_question)) %>
<%= turbo_frame_tag frame_dom_id do %>
  <%= form_with model: [:admin, club, medical_question], class: "space-y-4" do |form| %>
    <% if medical_question.errors.any? %>
      <div class="rounded border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700">
        <%= medical_question.errors.full_messages.to_sentence %>
      </div>
    <% end %>

    <div class="space-y-1">
      <%= form.label :prompt, "Question", class: "block text-sm font-medium text-slate-700" %>
      <%= form.text_area :prompt,
        rows: 2,
        class: "w-full rounded border border-slate-300 px-3 py-2 text-sm focus:border-slate-500 focus:outline-none focus:ring" %>
    </div>

    <div class="grid gap-4 md:grid-cols-2">
      <div class="space-y-1">
        <%= form.label :question_type, "Answer format", class: "block text-sm font-medium text-slate-700" %>
        <%= form.select :question_type,
          MedicalQuestion.question_types.keys.map { |type| [type.humanize, type] },
          {},
          class: "w-full rounded border border-slate-300 px-3 py-2 text-sm focus:border-slate-500 focus:outline-none focus:ring" %>
      </div>
      <div class="space-y-1">
        <%= form.label :position, "Display order", class: "block text-sm font-medium text-slate-700" %>
        <%= form.number_field :position,
          min: 0,
          class: "w-full rounded border border-slate-300 px-3 py-2 text-sm focus:border-slate-500 focus:outline-none focus:ring" %>
      </div>
    </div>

    <div class="flex flex-col gap-2">
      <label class="inline-flex items-center gap-2 text-sm text-slate-600">
        <%= form.check_box :required, class: "rounded border-slate-300 text-slate-900 focus:ring-slate-500" %>
        <span>Members must answer</span>
      </label>
      <label class="inline-flex items-center gap-2 text-sm text-slate-600">
        <%= form.check_box :active, class: "rounded border-slate-300 text-slate-900 focus:ring-slate-500" %>
        <span>Visible during registration</span>
      </label>
    </div>

    <div class="flex items-center justify-end gap-3">
      <% if medical_question.persisted? %>
        <%= link_to "Cancel",
          admin_club_medical_question_path(club, medical_question),
          data: { turbo_frame: dom_id(medical_question) },
          class: "text-sm font-medium text-slate-500 hover:text-slate-700" %>
      <% else %>
        <button
          type="button"
          class="text-sm font-medium text-slate-500 hover:text-slate-700"
          data-action="modal#close"
        >
          Cancel
        </button>
      <% end %>
      <%= form.submit(medical_question.persisted? ? "Save changes" : "Create question",
        class: "inline-flex items-center rounded bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-800") %>
    </div>
  <% end %>
<% end %>
