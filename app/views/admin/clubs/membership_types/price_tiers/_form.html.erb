<% frame_dom_id = local_assigns[:frame_id] || (price_tier.persisted? ? dom_id(price_tier) : dom_id(membership_type, :new_price_tier)) %>
<% form_url = price_tier.persisted? ?
                admin_club_membership_type_price_tier_path(club, membership_type, price_tier) :
                admin_club_membership_type_price_tiers_path(club, membership_type) %>

<%= turbo_frame_tag frame_dom_id do %>
  <%= form_with model: price_tier, url: form_url, class: "space-y-4" do |form| %>
    <% if price_tier.errors.any? %>
      <div class="rounded border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700">
        <%= price_tier.errors.full_messages.to_sentence %>
      </div>
    <% end %>

<div class="space-y-1">
  <%= form.label :label, "Label", class: "block text-sm font-medium text-slate-700" %>
  <%= form.text_field :label,
    class: "w-full rounded border border-slate-300 px-3 py-2 text-sm focus:border-slate-500 focus:outline-none focus:ring",
    placeholder: "e.g. Early bird discount" %>
</div>

<div class="grid gap-3 md:grid-cols-2">
  <div class="space-y-1">
    <%= form.label :starts_on, "Starts on", class: "block text-sm font-medium text-slate-700" %>
    <%= form.date_field :starts_on,
      value: price_tier.starts_on,
      class: "w-full rounded border border-slate-300 px-3 py-2 text-sm focus:border-slate-500 focus:outline-none focus:ring" %>
  </div>
  <div class="space-y-1">
    <%= form.label :ends_on, "Ends on", class: "block text-sm font-medium text-slate-700" %>
    <%= form.date_field :ends_on,
      value: price_tier.ends_on,
      class: "w-full rounded border border-slate-300 px-3 py-2 text-sm focus:border-slate-500 focus:outline-none focus:ring" %>
  </div>
</div>

<div class="grid gap-3 md:grid-cols-2">
  <div class="space-y-1">
    <%= form.label :amount, "Amount", class: "block text-sm font-medium text-slate-700" %>
    <%= form.number_field :amount,
      value: price_tier.amount&.to_f,
      step: 0.01,
          min: 0,
          class: "w-full rounded border border-slate-300 px-3 py-2 text-sm focus:border-slate-500 focus:outline-none focus:ring" %>
      </div>
      <div class="space-y-1">
        <%= form.label :position, "Display order", class: "block text-sm font-medium text-slate-700" %>
        <%= form.number_field :position,
          value: price_tier.position,
          min: 0,
          class: "w-full rounded border border-slate-300 px-3 py-2 text-sm focus:border-slate-500 focus:outline-none focus:ring" %>
      </div>
    </div>

    <div class="flex items-center justify-end gap-3">
      <% if price_tier.persisted? %>
        <%= link_to "Cancel",
          admin_club_membership_type_price_tier_path(club, membership_type, price_tier),
          data: { turbo_frame: dom_id(price_tier) },
          class: "text-sm font-medium text-slate-500 hover:text-slate-700" %>
      <% else %>
        <button
          type="button"
          class: "text-sm font-medium text-slate-500 hover:text-slate-700"
          data-action="modal#close"
        >
          Cancel
        </button>
      <% end %>
      <%= form.submit(price_tier.persisted? ? "Save changes" : "Create price tier",
        class: "inline-flex items-center rounded bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-800") %>
    </div>
  <% end %>
<% end %>
